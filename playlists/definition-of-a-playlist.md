# 播放列表的定义

播放列表文件的编码格式必须为UTF-8，它们不得包含任何字节顺序标记\(BOM\)，客户端应该无法解析包含BOM的播放列表或无法解析为UTF-8的播放列表，播放列表文件不得包含除CR\(U+000D\)和LF\(U+000A\)外的UTF-8控制字符\(U+0000到U+001F和U+007F到U+009F\)，所有的字符序列必须根据Unicode规范化形式NFC进行规范化。注意，US-ASCII符合以上这些规则。

播放列表文件中的行以单个换行符或者回车符后接换行符结尾，每一行是一个URI，空行或者字符”\#“开头，空行会被忽略，除明确指定了空格的元素外，不得存在空格。

以字符”\#“开头的行是注释或者标签，标签以\#EXT开头且是大小写敏感的，其它所有以\#开头的行都是注释且应该被忽略。

播放列表中的URI行被识别为媒体片段或者播放列表文件，每个媒体片段都是由URI以及适用的标签指定。

如果播放列表中的URI都是媒体片段，那么该播放列表为媒体播放列表；如果所有的URI都是媒体播放列表，那么该播放列表为主播放列表。播放列表必须是媒体播放列表或者主播放列表，其它所有的播放列表都是无效的。

列表中的URI都是相对的，相对于包含它们的播放列表URI。

媒体播放列表的时长是其中媒体片段的时长总和。

媒体片段的比特率等于媒体片段的大小除以由EXTINF标签标识的片段时长，注意，这样计算出来的是媒体片段本身的比特率，并没有加上由传输系统造成的数据量，比如HTTP，TCP，IP头部信息这些数据量。

媒体播放列表的峰值比特率是时长为0.5到1.5倍目标时长的一组连续媒体片段的最大比特率，一组连续的片段的比特率通过将片段大小除以片段时长总和。

媒体播放列表的平均比特率是其中媒体片段大小总和除以媒体播列表的总时长，这样计算出来的是媒体片段本身的平均比特率，并没有加上由传输系统造成的数据量，比如HTTP，TCP，IP头部信息这些数据量。





